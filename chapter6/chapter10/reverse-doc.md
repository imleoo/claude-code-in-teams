# AI反向生成文档与任务规划

通过“智能考古”，我们获得了大量关于旧系统的“原材料”——被AI解析后的业务逻辑、API功能和数据查询。下一步，也是至关重要的一步，是**将这些零散的洞察，系统化为指导未来开发的“蓝图”和“施工计划”**。

这个过程，我们称之为“AI反向工程文档”和“AI协作任务规划”。

## 1. AI反向工程：从代码洞察到系统蓝图

团队的目标不是简单翻译旧代码，而是要创造一套全新的、高质量的、AI友好的项目文档。

### 场景一：生成新项目的`CLAUDE.md`

基于AI对旧系统的全盘分析，项目经理李静引导AI生成了新重构项目的`CLAUDE.md`。

**李静的Prompt:**
> 你是一名资深的项目经理。我们刚刚完成了一个旧PHP数据仪表盘项目的代码分析。现在需要为新的重构项目（使用Python和React）创建一个`CLAUDE.md`。
>
> **旧系统分析结论摘要:**
> - **核心功能**: 提供GMV、用户增长、渠道来源的日/周/月报表。
> - **主要数据源**: `mysql.main_db`中的`orders`, `users`, `channels`表。
> - **技术痛点**: PHP 5.6, 复杂SQL拼接导致性能差, 前后端代码耦合严重。
>
> **新项目技术选型:**
> - **后端**: Python (FastAPI)
> - **前端**: React (Vite)
> - **数据库**: PostgreSQL
>
> 请根据以上信息，为新项目生成一份清晰、完整的`CLAUDE.md`项目信息表。

AI迅速生成了一份结构清晰的`CLAUDE.md`，明确了新项目的目标、技术栈和关键文档入口，为后续所有AI协作提供了统一的“上下文起点”。

### 场景二：生成模块信息表和API规范

接下来，团队利用AI对旧接口文件的分析结果，快速生成了新系统的`modules.md`和OpenAPI规范。

**后端工程师张伟的Prompt:**
> 基于我们之前对旧PHP接口的分析，我已经定义了新系统的后端模块划分。请帮我将此转化为Markdown格式的“模块信息表”。
>
> **模块划分:**
> 1.  **`api-gateway`**: FastAPI主服务，负责路由和认证。
> 2.  **`report-service`**: 核心报表生成服务，处理GMV、用户增长等业务逻辑。
> 3.  **`data-query-engine`**: 数据查询引擎，负责与PostgreSQL交互。
>
> 同时，请为`report-service`生成一个`GET /reports/summary`接口的OpenAPI v3规范（YAML格式），该接口需要返回总用户数、今日GMV和昨日对比。

通过这种方式，团队在几分钟内就完成了过去需要数天才能完成的文档编写工作。

## 2. AI协作任务规划：从蓝图到施工计划

当新文档（系统蓝图）准备就绪后，团队便利用AI将宏大的重构目标分解为可执行的、具体到人的开发任务。

**项目经理李静的Prompt:**
> 你是一位敏捷开发教练。我们即将开始一个仪表盘重构项目。我已经提供了新项目的`CLAUDE.md`和`modules.md`。
>
> **[粘贴CLAUDE.md和modules.md的内容]**
>
> 请根据这些信息，为我们生成一份详细的、可执行的敏捷开发任务清单（Task List）。请遵循以下要求：
> 1.  将任务分解为前端、后端、数据库三个部分。
> 2.  为每个任务预估一个大致的复杂度（用T恤尺码：S, M, L表示）。
> 3.  明确每个任务之间的依赖关系。
> 4.  输出为Markdown表格。

AI生成的任务清单如下：

| 类别 | 任务描述 | 复杂度 | 依赖项 | 关联模块 |
| :--- | :--- | :--- | :--- | :--- |
| **数据库** | 设计并创建`users`, `orders`等核心表结构 | M | - | `data-query-engine` |
| **数据库** | 编写数据迁移脚本，从旧MySQL迁移数据 | L | 数据库表结构 | `data-query-engine` |
| **后端** | 搭建FastAPI项目骨架，集成日志和错误处理 | S | - | `api-gateway` |
| **后端** | 实现`GET /reports/summary`接口 | M | 数据库表结构 | `report-service` |
| **前端** | 搭建React项目骨架，集成状态管理库 | S | - | `frontend-dashboard` |
| **前端** | 开发仪表盘主页布局及通用图表组件 | M | - | `frontend-dashboard` |
| **前端** | 对接`GET /reports/summary`接口并展示数据 | S | 后端接口完成 | `frontend-dashboard` |

---

**本节小结：** “AI反向生成文档”和“AI协作任务规划”是连接“考古”与“重建”的关键桥梁。它将AI对旧系统的理解，转化为指导新系统建设的结构化、可执行的计划。这个过程不仅极大地提升了文档编写和项目规划的效率，更重要的是，它在编码开始前，就为整个团队（包括AI）构建了一个统一的认知和清晰的行动路线图，从根本上降低了重构项目的风险和不确定性。